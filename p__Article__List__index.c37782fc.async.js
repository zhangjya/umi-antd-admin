"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[704],{64789:function(U,E,e){e.d(E,{Z:function(){return O}});var n=e(87462),o=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},d=g,f=e(84089),C=function(h,m){return o.createElement(f.Z,(0,n.Z)({},h,{ref:m,icon:d}))},O=o.forwardRef(C)},64317:function(U,E,e){var n=e(1413),o=e(91),g=e(22270),d=e(67294),f=e(66758),C=e(56499),O=e(85893),v=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],h=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],m=function(i,r){var b=i.fieldProps,R=i.children,p=i.params,j=i.proFieldProps,y=i.mode,P=i.valueEnum,W=i.request,I=i.showSearch,M=i.options,B=(0,o.Z)(i,v),N=(0,d.useContext)(f.Z);return(0,O.jsx)(C.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,g.h)(P),request:W,params:p,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:M,mode:y,showSearch:I,getPopupContainer:N.getPopupContainer},b),ref:r,proFieldProps:j},B),{},{children:R}))},u=d.forwardRef(function(a,i){var r=a.fieldProps,b=a.children,R=a.params,p=a.proFieldProps,j=a.mode,y=a.valueEnum,P=a.request,W=a.options,I=(0,o.Z)(a,h),M=(0,n.Z)({options:W,mode:j||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},r),B=(0,d.useContext)(f.Z);return(0,O.jsx)(C.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,g.h)(y),request:P,params:R,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:B.getPopupContainer},M),ref:i,proFieldProps:p},I),{},{children:b}))}),t=d.forwardRef(m),l=u,c=t;c.SearchSelect=l,c.displayName="ProFormComponent",E.Z=c},52688:function(U,E,e){var n=e(1413),o=e(91),g=e(67294),d=e(56499),f=e(85893),C=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],O=g.forwardRef(function(v,h){var m=v.fieldProps,u=v.unCheckedChildren,t=v.checkedChildren,l=v.proFieldProps,c=(0,o.Z)(v,C);return(0,f.jsx)(d.Z,(0,n.Z)({valueType:"switch",fieldProps:(0,n.Z)({unCheckedChildren:u,checkedChildren:t},m),ref:h,valuePropName:"checked",proFieldProps:l,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},c))});E.Z=O},90672:function(U,E,e){var n=e(1413),o=e(91),g=e(67294),d=e(56499),f=e(85893),C=["fieldProps","proFieldProps"],O=function(h,m){var u=h.fieldProps,t=h.proFieldProps,l=(0,o.Z)(h,C);return(0,f.jsx)(d.Z,(0,n.Z)({ref:m,valueType:"textarea",fieldProps:u,proFieldProps:t},l))};E.Z=g.forwardRef(O)},5966:function(U,E,e){var n=e(1413),o=e(91),g=e(67294),d=e(56499),f=e(85893),C=["fieldProps","proFieldProps"],O=["fieldProps","proFieldProps"],v="text",h=function(l){var c=l.fieldProps,a=l.proFieldProps,i=(0,o.Z)(l,C);return(0,f.jsx)(d.Z,(0,n.Z)({valueType:v,fieldProps:c,filedConfig:{valueType:v},proFieldProps:a},i))},m=function(l){var c=l.fieldProps,a=l.proFieldProps,i=(0,o.Z)(l,O);return(0,f.jsx)(d.Z,(0,n.Z)({valueType:"password",fieldProps:c,proFieldProps:a,filedConfig:{valueType:v}},i))},u=h;u.Password=m,u.displayName="ProFormComponent",E.Z=u},32443:function(U,E,e){e.d(E,{Z:function(){return b}});var n=e(1413),o=e(91),g=e(87462),d=e(67294),f={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},C=f,O=e(84089),v=function(p,j){return d.createElement(O.Z,(0,g.Z)({},p,{ref:j,icon:C}))},h=d.forwardRef(v),m=e(31365),u=e(15867),t=e(90789),l=e(9105),c=e(85893),a=["fieldProps","action","accept","listType","title","max","icon","buttonProps","disabled","proFieldProps"],i=function(p,j){var y,P=p.fieldProps,W=p.action,I=p.accept,M=p.listType,B=p.title,N=B===void 0?"\u5355\u51FB\u4E0A\u4F20":B,J=p.max,Y=p.icon,Q=Y===void 0?(0,c.jsx)(h,{}):Y,w=p.buttonProps,X=p.disabled,s=p.proFieldProps,G=(0,o.Z)(p,a),K=(0,d.useMemo)(function(){var S;return(S=G.fileList)!==null&&S!==void 0?S:G.value},[G.fileList,G.value]),D=(0,d.useContext)(l.A),V=(s==null?void 0:s.mode)||D.mode||"edit",z=(J===void 0||!K||(K==null?void 0:K.length)<J)&&V!=="read",$=(M!=null?M:P==null?void 0:P.listType)==="picture-card";return(0,c.jsx)(m.Z,(0,n.Z)((0,n.Z)({action:W,accept:I,ref:j,listType:M||"picture",fileList:K},P),{},{name:(y=P==null?void 0:P.name)!==null&&y!==void 0?y:"file",onChange:function(A){var F;P==null||(F=P.onChange)===null||F===void 0||F.call(P,A)},children:z&&($?(0,c.jsxs)("span",{children:[Q," ",N]}):(0,c.jsxs)(u.ZP,(0,n.Z)((0,n.Z)({disabled:X||(P==null?void 0:P.disabled)},w),{},{children:[Q,N]})))}))},r=(0,t.G)(d.forwardRef(i),{getValueFromEvent:function(p){return p.fileList}}),b=r},98631:function(U,E,e){e.r(E),e.d(E,{default:function(){return K}});var n=e(97857),o=e.n(n),g=e(5574),d=e.n(g),f=e(55375),C=e(86548),O=e(48689),v=e(64789),h=e(23430),m=e(11774),u=e(30671),t=e(80854),l=e(83062),c=e(15867),a=e(86738),i=e(67294),r=e(88465),b=e(27484),R=e.n(b),p=e(15009),j=e.n(p),y=e(99289),P=e.n(y),W=e(184),I=e(5966),M=e(64317),B=e(32443),N=e(52688),J=e(90672),Y=e(45360),Q=e(57953),w=e(71230),X=e(15746),s=e(85893);function G(D){var V=(0,i.useRef)(),z=(0,t.useRequest)(r.Z$,{manual:!0,onSuccess:function(F){if(F){var T;(T=V.current)===null||T===void 0||T.setFieldsValue(o()(o()({},F),{},{status:F.status===1,icon:F.icon?[F.icon]:[]}))}}});(0,i.useEffect)(function(){D.open&&D.data&&z.run(D.data)},[D.data,D.open]);var $=(0,t.useRequest)(r.Z2,{manual:!0,onSuccess:function(){Y.ZP.success("\u65B0\u589E\u6210\u529F"),D.onFinish()}}),S=(0,t.useRequest)(r.Ob,{manual:!0,onSuccess:function(){Y.ZP.success("\u66F4\u65B0\u6210\u529F"),D.onFinish()}});return(0,s.jsx)(W.a,{formRef:V,open:D.open,width:"50vw",title:D.data?"\u7F16\u8F91\u6587\u7AE0":"\u65B0\u589E\u6587\u7AE0",drawerProps:{destroyOnClose:!0,onClose:D.onFinish},onOpenChange:function(F){return!F&&D.onFinish()},onFinish:function(){var A=P()(j()().mark(function F(T){var H,L;return j()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(L=o()(o()({},T),{},{status:T.status?1:0,icon:(H=T.icon)!==null&&H!==void 0&&H.length?T.icon[0]:""}),!D.data){x.next=7;break}return L.id=Number(D.data),x.next=5,S.run(L);case 5:x.next=9;break;case 7:return x.next=9,$.run(L);case 9:return x.abrupt("return",!0);case 10:case"end":return x.stop()}},F)}));return function(F){return A.apply(this,arguments)}}(),children:(0,s.jsxs)(Q.Z,{spinning:z.loading,tip:"\u52A0\u8F7D\u4E2D...",children:[(0,s.jsxs)(w.Z,{gutter:16,children:[(0,s.jsxs)(X.Z,{span:14,xs:24,sm:14,children:[(0,s.jsx)(I.Z,{name:"productName",label:"\u6587\u7AE0\u6807\u9898",width:"md",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6587\u7AE0\u6807\u9898"}],fieldProps:{maxLength:30,showCount:!0}}),(0,s.jsx)(I.Z,{name:"intro",label:"\u6587\u7AE0\u7B80\u4ECB",width:"md",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6587\u7AE0\u540D\u79F0"}],fieldProps:{maxLength:50,showCount:!0},tooltip:"\u7B80\u77ED\u4ECB\u7ECD\uFF0C\u6700\u591A50\u4E2A\u5B57"}),(0,s.jsx)(M.Z,{name:"categoryParentId",label:"\u6240\u5C5E\u5206\u7C7B",width:"md"})]}),(0,s.jsxs)(X.Z,{span:10,xs:24,sm:10,children:[(0,s.jsx)(B.Z,{name:"icon",label:"\u6587\u7AE0\u56FE\u6807",fieldProps:{listType:"picture-card"},max:1}),(0,s.jsx)(N.Z,{name:"status",label:"\u72B6\u6001",checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",required:!0})]})]}),(0,s.jsx)(B.Z,{name:"introImgs",label:"\u6587\u7AE0\u5C55\u793A\u56FE\u7247",fieldProps:{listType:"picture-card"},max:5,extra:"\u6700\u591A\u4E0A\u4F20 5 \u5F20\u56FE\u7247"}),(0,s.jsx)(J.Z,{name:"detail",label:"\u6587\u7AE0\u8BE6\u60C5",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6587\u7AE0\u8BE6\u60C5"}],fieldProps:{maxLength:500,showCount:!0,rows:5}})]})})}function K(){var D=(0,i.useState)(!1),V=d()(D,2),z=V[0],$=V[1],S=(0,i.useState)(""),A=d()(S,2),F=A[0],T=A[1],H=(0,i.useRef)(),L=(0,t.useRequest)(r.Yn,{manual:!0,onSuccess:function(){var Z;(Z=H.current)===null||Z===void 0||Z.reload()}}),k=(0,i.useMemo)(function(){return[{dataIndex:"index",valueType:"indexBorder",title:"\u5E8F\u53F7",width:50,fixed:"left"},{dataIndex:"icon",title:"\u6587\u7AE0\u56FE\u6807",valueType:"image",hideInSearch:!0},{dataIndex:"productName",title:"\u6587\u7AE0\u6807\u9898",copyable:!0},{dataIndex:"author",title:"\u6587\u7AE0\u4F5C\u8005",copyable:!0},{dataIndex:"createTime",title:"\u521B\u5EFA\u65F6\u95F4",hideInSearch:!0},{dataIndex:"createTime",title:"\u521B\u5EFA\u65F6\u95F4",hideInTable:!0,valueType:"dateRange",search:{transform:function(Z){return{startDate:Z[0],endDate:Z[1]}}},fieldProps:{disabledDate:function(Z){return Z&&R()(Z).isAfter(R()())}}},{dataIndex:"status",title:"\u72B6\u6001",valueEnum:{1:{text:"\u542F\u7528",status:"Success"},2:{text:"\u7981\u7528",status:"Default"}}},{title:"\u64CD\u4F5C",valueType:"option",width:90,fixed:"right",render:function(Z,_){return[(0,s.jsx)(l.Z,{title:"\u7F16\u8F91",children:(0,s.jsx)(c.ZP,{type:"text",icon:(0,s.jsx)(C.Z,{}),onClick:function(){T(_.id),$(!0)}})},"edit"),(0,s.jsx)(a.Z,{okType:"danger",title:"\u5220\u9664\u5F53\u524D\u6587\u7AE0",onConfirm:function(){return L.run(_.categoryId)},okButtonProps:{loading:L.loading},children:(0,s.jsx)(c.ZP,{type:"text",danger:!0,icon:(0,s.jsx)(O.Z,{})})},"delete")]}}]},[L.loading]);return(0,s.jsxs)(m._z,{title:"\u6587\u7AE0\u7BA1\u7406",children:[(0,s.jsx)(u.Z,o()(o()({},f.L),{},{actionRef:H,columns:k,request:function(Z){return(0,r.Gx)(o()(o()({},Z),{},{status:Z.status?1:0}))},toolbar:{title:"\u6587\u7AE0\u5217\u8868",actions:[(0,s.jsx)(c.ZP,{type:"primary",icon:(0,s.jsx)(v.Z,{}),onClick:function(){return $(!0)},children:"\u65B0\u589E"},"add"),(0,s.jsx)(c.ZP,{type:"dashed",icon:(0,s.jsx)(h.Z,{}),children:"\u5BFC\u51FA"},"export")]}})),(0,s.jsx)(G,{open:z,data:F,onFinish:function(){$(!1),T("")}})]})}},88465:function(U,E,e){e.d(E,{GC:function(){return g},Gx:function(){return C},Ob:function(){return v},Yn:function(){return h},Z$:function(){return m},Z2:function(){return O},lD:function(){return f},t5:function(){return o},y1:function(){return d}});var n=e(78158),o=function(t){return(0,n.v)("/admin/productCategory/pages",t)},g=function(t){return(0,n.v)("/admin/productCategory/add",t)},d=function(t){return(0,n.v)("/admin/productCategory/update",t)},f=function(t){return(0,n.v)("/admin/productCategory/delete",{id:t})},C=function(t){return(0,n.v)("/admin/product/pages",t)},O=function(t){return(0,n.v)("/admin/product/add",t)},v=function(t){return(0,n.v)("/admin/product/update",t)},h=function(t){return(0,n.v)("/admin/product/delete",{id:t})},m=function(t){return(0,n.v)("/admin/product/detail",{id:t})}},78158:function(U,E,e){e.d(E,{v:function(){return h}});var n=e(15009),o=e.n(n),g=e(99289),d=e.n(g),f=e(80854),C=e(26855),O=function(u,t){C.Z.error({message:u,description:t})},v=function(){var m=d()(o()().mark(function u(t,l){var c,a;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c={"Content-Type":"application/json"},r.next=4,(0,f.request)("/api".concat(t),{method:"POST",headers:c,data:l,timeout:1800});case 4:if(a=r.sent,!(a&&a.code!==void 0)){r.next=15;break}r.t0=a.code,r.next=r.t0===0?9:r.t0===1?10:r.t0===401?11:12;break;case 9:return r.abrupt("return",Promise.resolve(a.data));case 10:return r.abrupt("break",13);case 11:return r.abrupt("break",13);case 12:return r.abrupt("return",Promise.reject(a));case 13:r.next=16;break;case 15:return r.abrupt("return",Promise.resolve(a));case 16:r.next=30;break;case 18:if(r.prev=18,r.t1=r.catch(0),!r.t1.response){r.next=29;break}r.t2=r.t1.response.status,r.next=r.t2===401?24:r.t2===403?25:r.t2===404?26:28;break;case 24:return r.abrupt("break",29);case 25:return r.abrupt("break",29);case 26:return O("\u8BF7\u6C42\u5730\u5740\u4E0D\u5B58\u5728",r.t1.config.url),r.abrupt("break",29);case 28:return r.abrupt("break",29);case 29:return r.abrupt("return",Promise.reject(r.t1));case 30:case"end":return r.stop()}},u,null,[[0,18]])}));return function(t,l){return m.apply(this,arguments)}}(),h=function(){var m=d()(o()().mark(function u(t,l){return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",v(t,l));case 1:case"end":return a.stop()}},u)}));return function(t,l){return m.apply(this,arguments)}}()}}]);
