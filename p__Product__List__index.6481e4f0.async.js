"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[941],{64789:function(I,C,e){e.d(C,{Z:function(){return x}});var n=e(87462),u=e(67294),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},i=g,h=e(84089),F=function(E,P){return u.createElement(h.Z,(0,n.Z)({},E,{ref:P,icon:i}))},x=u.forwardRef(F)},64317:function(I,C,e){var n=e(1413),u=e(91),g=e(22270),i=e(67294),h=e(66758),F=e(56499),x=e(85893),p=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],E=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],P=function(d,r){var W=d.fieldProps,A=d.children,m=d.params,y=d.proFieldProps,B=d.mode,v=d.valueEnum,K=d.request,S=d.showSearch,M=d.options,U=(0,u.Z)(d,p),V=(0,i.useContext)(h.Z);return(0,x.jsx)(F.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,g.h)(v),request:K,params:m,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({options:M,mode:B,showSearch:S,getPopupContainer:V.getPopupContainer},W),ref:r,proFieldProps:y},U),{},{children:A}))},s=i.forwardRef(function(o,d){var r=o.fieldProps,W=o.children,A=o.params,m=o.proFieldProps,y=o.mode,B=o.valueEnum,v=o.request,K=o.options,S=(0,u.Z)(o,E),M=(0,n.Z)({options:K,mode:y||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},r),U=(0,i.useContext)(h.Z);return(0,x.jsx)(F.Z,(0,n.Z)((0,n.Z)({valueEnum:(0,g.h)(B),request:v,params:A,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,n.Z)({getPopupContainer:U.getPopupContainer},M),ref:d,proFieldProps:m},S),{},{children:W}))}),t=i.forwardRef(P),l=s,c=t;c.SearchSelect=l,c.displayName="ProFormComponent",C.Z=c},52688:function(I,C,e){var n=e(1413),u=e(91),g=e(67294),i=e(56499),h=e(85893),F=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],x=g.forwardRef(function(p,E){var P=p.fieldProps,s=p.unCheckedChildren,t=p.checkedChildren,l=p.proFieldProps,c=(0,u.Z)(p,F);return(0,h.jsx)(i.Z,(0,n.Z)({valueType:"switch",fieldProps:(0,n.Z)({unCheckedChildren:s,checkedChildren:t},P),ref:E,valuePropName:"checked",proFieldProps:l,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},c))});C.Z=x},90672:function(I,C,e){var n=e(1413),u=e(91),g=e(67294),i=e(56499),h=e(85893),F=["fieldProps","proFieldProps"],x=function(E,P){var s=E.fieldProps,t=E.proFieldProps,l=(0,u.Z)(E,F);return(0,h.jsx)(i.Z,(0,n.Z)({ref:P,valueType:"textarea",fieldProps:s,proFieldProps:t},l))};C.Z=g.forwardRef(x)},5966:function(I,C,e){var n=e(1413),u=e(91),g=e(67294),i=e(56499),h=e(85893),F=["fieldProps","proFieldProps"],x=["fieldProps","proFieldProps"],p="text",E=function(l){var c=l.fieldProps,o=l.proFieldProps,d=(0,u.Z)(l,F);return(0,h.jsx)(i.Z,(0,n.Z)({valueType:p,fieldProps:c,filedConfig:{valueType:p},proFieldProps:o},d))},P=function(l){var c=l.fieldProps,o=l.proFieldProps,d=(0,u.Z)(l,x);return(0,h.jsx)(i.Z,(0,n.Z)({valueType:"password",fieldProps:c,proFieldProps:o,filedConfig:{valueType:p}},d))},s=E;s.Password=P,s.displayName="ProFormComponent",C.Z=s},32443:function(I,C,e){e.d(C,{Z:function(){return W}});var n=e(1413),u=e(91),g=e(87462),i=e(67294),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},F=h,x=e(84089),p=function(m,y){return i.createElement(x.Z,(0,g.Z)({},m,{ref:y,icon:F}))},E=i.forwardRef(p),P=e(31365),s=e(15867),t=e(90789),l=e(9105),c=e(85893),o=["fieldProps","action","accept","listType","title","max","icon","buttonProps","disabled","proFieldProps"],d=function(m,y){var B,v=m.fieldProps,K=m.action,S=m.accept,M=m.listType,U=m.title,V=U===void 0?"\u5355\u51FB\u4E0A\u4F20":U,Q=m.max,X=m.icon,a=X===void 0?(0,c.jsx)(E,{}):X,_=m.buttonProps,q=m.disabled,Y=m.proFieldProps,b=(0,u.Z)(m,o),N=(0,i.useMemo)(function(){var G;return(G=b.fileList)!==null&&G!==void 0?G:b.value},[b.fileList,b.value]),w=(0,i.useContext)(l.A),ee=(Y==null?void 0:Y.mode)||w.mode||"edit",re=(Q===void 0||!N||(N==null?void 0:N.length)<Q)&&ee!=="read",k=(M!=null?M:v==null?void 0:v.listType)==="picture-card";return(0,c.jsx)(P.Z,(0,n.Z)((0,n.Z)({action:K,accept:S,ref:y,listType:M||"picture",fileList:N},v),{},{name:(B=v==null?void 0:v.name)!==null&&B!==void 0?B:"file",onChange:function(te){var f;v==null||(f=v.onChange)===null||f===void 0||f.call(v,te)},children:re&&(k?(0,c.jsxs)("span",{children:[a," ",V]}):(0,c.jsxs)(s.ZP,(0,n.Z)((0,n.Z)({disabled:q||(v==null?void 0:v.disabled)},_),{},{children:[a,V]})))}))},r=(0,t.G)(i.forwardRef(d),{getValueFromEvent:function(m){return m.fileList}}),W=r},1784:function(I,C,e){e.r(C),e.d(C,{default:function(){return te}});var n=e(97857),u=e.n(n),g=e(5574),i=e.n(g),h=e(55375),F=e(86548),x=e(48689),p=e(64789),E=e(23430),P=e(11774),s=e(30671),t=e(80854),l=e(83062),c=e(15867),o=e(86738),d=e(67294),r=e(88465),W=e(15009),A=e.n(W),m=e(99289),y=e.n(m),B=e(184),v=e(5966),K=e(64317),S=e(32443),M=e(52688),U=e(97269),V=e(1413),Q=e(91),X=e(56499),a=e(85893),_=["fieldProps","min","proFieldProps","max"],q=function(j,z){var $=j.fieldProps,J=j.min,R=j.proFieldProps,O=j.max,T=(0,Q.Z)(j,_);return(0,a.jsx)(X.Z,(0,V.Z)({valueType:"digit",fieldProps:(0,V.Z)({min:J,max:O},$),ref:z,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:R},T))},Y=d.forwardRef(q),b=Y,N=e(90672),w=e(45360),ee=e(57953),re=e(71230),k=e(15746);function G(f){var j=(0,d.useRef)(),z=(0,t.useRequest)(r.Z$,{manual:!0,onSuccess:function(O){if(O){var T;(T=j.current)===null||T===void 0||T.setFieldsValue(u()(u()({},O),{},{status:O.status===1,icon:O.icon?[O.icon]:[]}))}}});(0,d.useEffect)(function(){f.open&&f.data&&z.run(f.data)},[f.data,f.open]);var $=(0,t.useRequest)(r.Z2,{manual:!0,onSuccess:function(){w.ZP.success("\u65B0\u589E\u6210\u529F"),f.onFinish()}}),J=(0,t.useRequest)(r.Ob,{manual:!0,onSuccess:function(){w.ZP.success("\u66F4\u65B0\u6210\u529F"),f.onFinish()}});return(0,a.jsx)(B.a,{formRef:j,open:f.open,width:"50vw",title:f.data?"\u7F16\u8F91\u5546\u54C1":"\u65B0\u589E\u5546\u54C1",drawerProps:{destroyOnClose:!0,onClose:f.onFinish},onOpenChange:function(O){return!O&&f.onFinish()},onFinish:function(){var R=y()(A()().mark(function O(T){var H,L;return A()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(L=u()(u()({},T),{},{status:T.status?1:0,icon:(H=T.icon)!==null&&H!==void 0&&H.length?T.icon[0]:""}),!f.data){D.next=7;break}return L.id=Number(f.data),D.next=5,J.run(L);case 5:D.next=9;break;case 7:return D.next=9,$.run(L);case 9:return D.abrupt("return",!0);case 10:case"end":return D.stop()}},O)}));return function(O){return R.apply(this,arguments)}}(),children:(0,a.jsxs)(ee.Z,{spinning:z.loading,tip:"\u52A0\u8F7D\u4E2D...",children:[(0,a.jsxs)(re.Z,{gutter:16,children:[(0,a.jsxs)(k.Z,{span:14,xs:24,sm:14,children:[(0,a.jsx)(v.Z,{name:"productName",label:"\u5546\u54C1\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5546\u54C1\u540D\u79F0"}],fieldProps:{maxLength:30,showCount:!0}}),(0,a.jsx)(v.Z,{name:"intro",label:"\u5546\u54C1\u7B80\u4ECB",width:"md",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5546\u54C1\u540D\u79F0"}],fieldProps:{maxLength:50,showCount:!0},tooltip:"\u7B80\u77ED\u4ECB\u7ECD\uFF0C\u6700\u591A50\u4E2A\u5B57"}),(0,a.jsx)(K.Z,{name:"categoryParentId",label:"\u6240\u5C5E\u5206\u7C7B",width:"md"})]}),(0,a.jsxs)(k.Z,{span:10,xs:24,sm:10,children:[(0,a.jsx)(S.Z,{name:"icon",label:"\u5546\u54C1\u56FE\u6807",fieldProps:{listType:"picture-card"},max:1}),(0,a.jsx)(M.Z,{name:"status",label:"\u72B6\u6001",checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",required:!0})]})]}),(0,a.jsxs)(U.A.Group,{children:[(0,a.jsx)(b,{name:"price",label:"\u5355\u4EF7",width:"xs",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5355\u4EF7"}],min:0,max:1e6,fieldProps:{precision:2,step:1,prefix:"\uFFE5"},tooltip:"\u6700\u5C0F\u4E3A 0\uFF0C\u6700\u5927\u4E3A 100,000\uFF0C\u4EC5\u652F\u6301\u4E24\u4F4D\u5C0F\u6570"}),(0,a.jsx)(b,{name:"salePrice",label:"\u552E\u4EF7",width:"xs",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u552E\u4EF7"}],min:0,max:1e6,fieldProps:{precision:2,step:1,prefix:"\uFFE5"},tooltip:"\u6700\u5C0F\u4E3A 0\uFF0C\u6700\u5927\u4E3A 100,000\uFF0C\u4EC5\u652F\u6301\u4E24\u4F4D\u5C0F\u6570"}),(0,a.jsx)(b,{name:"stock",label:"\u5E93\u5B58",width:"xs",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5E93\u5B58"}],min:0,max:1e6,fieldProps:{precision:0,step:1,suffix:"\u4E2A"},tooltip:"\u6700\u5C0F\u4E3A 0\uFF0C\u6700\u5927\u4E3A 100,000\uFF0C\u4EC5\u652F\u6301\u6574\u6570"})]}),(0,a.jsx)(S.Z,{name:"introImgs",label:"\u5546\u54C1\u5C55\u793A\u56FE\u7247",fieldProps:{listType:"picture-card"},max:5,extra:"\u6700\u591A\u4E0A\u4F20 5 \u5F20\u56FE\u7247"}),(0,a.jsx)(N.Z,{name:"detail",label:"\u5546\u54C1\u8BE6\u60C5",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5546\u54C1\u8BE6\u60C5"}],fieldProps:{maxLength:500,showCount:!0,rows:5}})]})})}function te(){var f=(0,d.useState)(!1),j=i()(f,2),z=j[0],$=j[1],J=(0,d.useState)(""),R=i()(J,2),O=R[0],T=R[1],H=(0,d.useRef)(),L=(0,t.useRequest)(r.Yn,{manual:!0,onSuccess:function(){var Z;(Z=H.current)===null||Z===void 0||Z.reload()}}),ne=(0,d.useMemo)(function(){return[{dataIndex:"index",valueType:"indexBorder",title:"\u5E8F\u53F7",width:50,fixed:"left"},{dataIndex:"icon",title:"\u5546\u54C1\u56FE\u6807",valueType:"image",hideInSearch:!0},{dataIndex:"productName",title:"\u5546\u54C1\u540D\u79F0",copyable:!0},{dataIndex:"intro",title:"\u5546\u54C1\u7B80\u4ECB",hideInSearch:!0},{dataIndex:"categoryName",title:"\u6240\u5C5E\u5206\u7C7B",copyable:!0},{dataIndex:"price",title:"\u5355\u4EF7",hideInSearch:!0,renderText:function(Z){return"\uFFE5 ".concat(Z)}},{dataIndex:"salePrice",title:"\u552E\u4EF7",hideInSearch:!0,renderText:function(Z){return"\uFFE5 ".concat(Z)}},{dataIndex:"createTime",title:"\u521B\u5EFA\u65F6\u95F4",hideInSearch:!0},{dataIndex:"createTime",title:"\u521B\u5EFA\u65F6\u95F4",hideInTable:!0,valueType:"dateRange",search:{transform:function(Z){return{startDate:Z[0],endDate:Z[1]}}}},{dataIndex:"status",title:"\u72B6\u6001",valueEnum:{1:{text:"\u542F\u7528",status:"Success"},2:{text:"\u7981\u7528",status:"Default"}}},{title:"\u64CD\u4F5C",valueType:"option",width:90,fixed:"right",render:function(Z,ae){return[(0,a.jsx)(l.Z,{title:"\u7F16\u8F91",children:(0,a.jsx)(c.ZP,{type:"text",icon:(0,a.jsx)(F.Z,{}),onClick:function(){T(ae.id),$(!0)}})},"edit"),(0,a.jsx)(o.Z,{okType:"danger",title:"\u5220\u9664\u5F53\u524D\u5546\u54C1",onConfirm:function(){return L.run(ae.categoryId)},okButtonProps:{loading:L.loading},children:(0,a.jsx)(c.ZP,{type:"text",danger:!0,icon:(0,a.jsx)(x.Z,{})})},"delete")]}}]},[L.loading]);return(0,a.jsxs)(P._z,{title:"\u5546\u54C1\u7BA1\u7406",children:[(0,a.jsx)(s.Z,u()(u()({},h.L),{},{actionRef:H,columns:ne,request:function(Z){return(0,r.Gx)(u()(u()({},Z),{},{status:Z.status?1:0}))},scroll:{x:"max-content"},toolbar:{title:"\u5546\u54C1\u5217\u8868",actions:[(0,a.jsx)(c.ZP,{type:"primary",icon:(0,a.jsx)(p.Z,{}),onClick:function(){return $(!0)},children:"\u65B0\u589E"},"add"),(0,a.jsx)(c.ZP,{type:"dashed",icon:(0,a.jsx)(E.Z,{}),children:"\u5BFC\u51FA"},"export")]}})),(0,a.jsx)(G,{open:z,data:O,onFinish:function(){$(!1),T("")}})]})}},88465:function(I,C,e){e.d(C,{GC:function(){return g},Gx:function(){return F},Ob:function(){return p},Yn:function(){return E},Z$:function(){return P},Z2:function(){return x},lD:function(){return h},t5:function(){return u},y1:function(){return i}});var n=e(78158),u=function(t){return(0,n.v)("/admin/productCategory/pages",t)},g=function(t){return(0,n.v)("/admin/productCategory/add",t)},i=function(t){return(0,n.v)("/admin/productCategory/update",t)},h=function(t){return(0,n.v)("/admin/productCategory/delete",{id:t})},F=function(t){return(0,n.v)("/admin/product/pages",t)},x=function(t){return(0,n.v)("/admin/product/add",t)},p=function(t){return(0,n.v)("/admin/product/update",t)},E=function(t){return(0,n.v)("/admin/product/delete",{id:t})},P=function(t){return(0,n.v)("/admin/product/detail",{id:t})}},78158:function(I,C,e){e.d(C,{v:function(){return E}});var n=e(15009),u=e.n(n),g=e(99289),i=e.n(g),h=e(80854),F=e(26855),x=function(s,t){F.Z.error({message:s,description:t})},p=function(){var P=i()(u()().mark(function s(t,l){var c,o;return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c={"Content-Type":"application/json"},r.next=4,(0,h.request)("/api".concat(t),{method:"POST",headers:c,data:l,timeout:1800});case 4:if(o=r.sent,!(o&&o.code!==void 0)){r.next=15;break}r.t0=o.code,r.next=r.t0===0?9:r.t0===1?10:r.t0===401?11:12;break;case 9:return r.abrupt("return",Promise.resolve(o.data));case 10:return r.abrupt("break",13);case 11:return r.abrupt("break",13);case 12:return r.abrupt("return",Promise.reject(o));case 13:r.next=16;break;case 15:return r.abrupt("return",Promise.resolve(o));case 16:r.next=30;break;case 18:if(r.prev=18,r.t1=r.catch(0),!r.t1.response){r.next=29;break}r.t2=r.t1.response.status,r.next=r.t2===401?24:r.t2===403?25:r.t2===404?26:28;break;case 24:return r.abrupt("break",29);case 25:return r.abrupt("break",29);case 26:return x("\u8BF7\u6C42\u5730\u5740\u4E0D\u5B58\u5728",r.t1.config.url),r.abrupt("break",29);case 28:return r.abrupt("break",29);case 29:return r.abrupt("return",Promise.reject(r.t1));case 30:case"end":return r.stop()}},s,null,[[0,18]])}));return function(t,l){return P.apply(this,arguments)}}(),E=function(){var P=i()(u()().mark(function s(t,l){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",p(t,l));case 1:case"end":return o.stop()}},s)}));return function(t,l){return P.apply(this,arguments)}}()}}]);
